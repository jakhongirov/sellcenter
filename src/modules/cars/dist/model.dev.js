"use strict";

var _require = require("../../lib/postgres"),
    fetch = _require.fetch,
    fetchALL = _require.fetchALL;

var ADD_ENGINE_DATA = "\n   UPDATE\n      cars\n   SET\n      car_fuel_type = $2,\n      car_power = $3,\n      car_cubic_capacity = $4,\n      car_transmission = $5,\n      car_fuel_consumption = $6,\n      car_emissions_sticker = $7,\n      car_emission_class = $8,\n      car_exterior_colour = $9,\n      car_trailer_coupling = $10,\n      car_parking_sensors = $11,\n      car_cruise_control = $12,\n      others = $13\n   WHERE\n      car_id = $1\n   RETURNING *;\n";
var ADD_INTERIOR_DATA = "\n   UPDATE\n      cars\n   SET\n      car_interior_colour = $2,\n      car_interior_material = $3,\n      car_airbags = $4,\n      car_air_conditioning = $5,\n      extras = $6,\n      car_vendor = $7,\n      car_dealer_rating = $8,\n      car_discount_offers = $9,\n      car_non_smoker = $10,\n      car_taxi = $11,\n      car_vat = $12,\n      car_warranty = $13,\n      car_environmental_bonus = $14,\n      car_damaged = $15,\n      car_commercial = $16,\n      car_programme = $17,\n      car_description = $18,\n      car_active = true\n   WHERE\n      car_id = $1\n   RETURNING *;\n";
var ADD_CAR = "\n   INSERT INTO\n      cars (\n         user_id,\n         car_make,\n         car_model,\n         car_variant,\n         car_body,\n         car_number_seats,\n         car_number_door,\n         car_silding_door,\n         car_condition,\n         car_type,\n         car_payment_type,\n         car_price,\n         car_firt_date,\n         car_firt_date_year,\n         car_mileage,\n         car_hu_valid_until,\n         car_previous_owners,\n         car_full_service_history,\n         car_roadworthy,\n         car_country,\n         car_city_zipcode,\n         car_radius,\n         car_images_url,\n         car_images_name,\n         user_email,\n         user_phone,\n         car_vide_link\n      )\n      VALUES (\n         $1,\n         $2,\n         $3,\n         $4,\n         $5,\n         $6,\n         $7,\n         $8,\n         $9,\n         $10,\n         $11,\n         $12,\n         $13,\n         $14,\n         $15,\n         $16,\n         $17,\n         $18,\n         $19,\n         $20,\n         $21,\n         $22,\n         $23,\n         $24,\n         $25,\n         $26,\n         $27\n      )\n      RETURNING *;\n";
var UPDATE_CAR = "\n   UPDATE\n      cars\n   SET\n      user_id = $2,\n      car_make = $3,\n      car_model = $4,\n      car_variant = $5,\n      car_body = $6,\n      car_number_seats = $7,\n      car_number_door = $8,\n      car_silding_door = $9,\n      car_condition = $10,\n      car_type = $11,\n      car_payment_type = $12,\n      car_price = $13,\n      car_firt_date = $14,\n      car_firt_date_year = $15,\n      car_mileage = $16,\n      car_hu_valid_until = $17,\n      car_previous_owners = $18,\n      car_full_service_history = $19,\n      car_roadworthy = $20,\n      car_country = $21,\n      car_city_zipcode = $22,\n      car_radius = $23,\n      car_images_url = $34,\n      car_img_name = $25,\n      car_images_name = $26,\n      user_phone  = $27,\n      car_vide_link = $28\n   WHERE\n      car_id = $1\n   RETURNING *;\n";
var FOUND_CAR = "\n   SELECT\n      car_id,\n      car_images_url,\n      car_images_name\n   FROM\n      cars\n   WHERE\n      car_id = $1;\n";
var DELETE_CAR = "\n   DELETE FROM\n      cars\n   WHERE\n      car_id = $1\n   RETURNING *;\n";
var FOUND_CAR_BY_ID = "\n   SELECT\n      *\n   FROM\n      cars\n   WHERE\n      car_id = $1\n";

var carsList = function carsList(limit, offset) {
  var CARS_LIST = "\n      SELECT\n         *\n      FROM\n         cars\n      ORDER BY\n         car_id DESC\n      LIMIT ".concat(limit, "\n      OFFSET ").concat(offset, ";\n   ");
  return fetchALL(CARS_LIST);
};

var foundCarsList = function foundCarsList(car_make, car_model, car_description, car_variant, bodyArr, car_number_seats, car_number_door, car_silding_door, car_condition, typeArr, car_payment_type, car_price_from, car_price_up_to, car_firt_date_year_from, car_firt_date_year_up_to, car_mileage_from, car_mileage_up_to, car_hu_valid_until, car_previous_owners, car_full_service_history, car_roadworthy, car_country, car_city, zipcode, car_radius, fuelArr, car_power_from, car_power_up_to, car_cubic_capacity_from, car_cubic_capacity_to, transmissionArr, car_fuel_consumption, car_emissions_sticker, car_emission_class, colorArr, car_trailer_coupling, parkingArr, car_cruise_control, interiorColourgArr, interiorMaterialgArr, car_airbags, car_air_conditioning, extrasId, othersId, car_vendor, car_dealer_rating, car_discount_offers, car_non_smoker, car_taxi, car_vat, car_warranty, car_environmental_bonus, car_damaged, car_commercial, car_programme, video, picture, days, offset, limit) {
  var FOUND_CARS_LIST = "\n      SELECT \n         car_make,\n         car_model,\n         car_images_url,\n         car_body,\n         car_transmission,\n         car_fuel_consumption,\n         car_number_seats,\n         car_number_door,\n         car_firt_date,\n         car_mileage,\n         car_hu_valid_until,\n         car_price,\n         user_phone,\n         user_email\n      FROM\n         cars\n      WHERE\n         car_active = true\n         ".concat(car_make ? "and car_make = '".concat(car_make, "'") : "", "\n         ").concat(car_model ? "and car_model = '".concat(car_model, "'") : "", "\n         ").concat(car_description ? "and car_description ilike '%".concat(car_description, "%'") : "", "\n         ").concat(car_variant ? "and car_variant = '".concat(car_variant, "'") : "", "\n         ").concat(bodyArr > 0 ? "and ARRAY[car_body] @> ".concat(bodyArr) : '', "\n         ").concat(car_number_seats ? "and car_number_seats = ".concat(car_number_seats) : "", "\n         ").concat(car_number_door ? "and car_number_door = ".concat(car_number_door) : "", "\n         ").concat(car_silding_door ? "and car_silding_door = '".concat(car_silding_door, "'") : "", "\n         ").concat(car_condition ? "and car_condition = '".concat(car_condition, "'") : "", "\n         ").concat(typeArr > 0 ? "and ARRAY[car_type] @> ".concat(typeArr) : '', "\n         ").concat(car_payment_type ? "and car_payment_type = '".concat(car_payment_type, "'") : "", "\n         ").concat(car_price_from ? "and car_price >= ".concat(car_price_from) : "", "\n         ").concat(car_price_up_to ? "and car_price =< ".concat(car_price_up_to) : "", "\n         ").concat(car_firt_date_year_from ? "and car_firt_date_year >= ".concat(car_firt_date_year_from) : "", "\n         ").concat(car_firt_date_year_up_to ? "and car_firt_date_year =< ".concat(car_firt_date_year_up_to) : "", "\n         ").concat(car_mileage_from ? "and car_mileage >= ".concat(car_mileage_from) : "", "\n         ").concat(car_mileage_up_to ? "and car_mileage =< ".concat(car_mileage_up_to) : "", "\n         ").concat(car_hu_valid_until ? "and car_hu_valid_until = '".concat(car_hu_valid_until, "'") : "", "\n         ").concat(car_previous_owners ? "and car_previous_owners = ".concat(car_previous_owners) : "", "\n         ").concat(car_full_service_history ? "and car_full_service_history = '".concat(car_full_service_history, "'") : "", "\n         ").concat(car_roadworthy ? "and car_roadworthy = '".concat(car_roadworthy, "'") : "", "\n         ").concat(car_country ? "and car_country = '".concat(car_country, "'") : "", "\n         ").concat(car_city > 0 ? "and ".concat(car_city, " @> ARRAY[car_city_zipcode]") : "", "\n         ").concat(zipcode ? "and car_city_zipcode ilike '%".concat(zipcode, "%'") : "", "\n         ").concat(car_radius ? "and car_radius = ".concat(car_radius) : "", "\n         ").concat(fuelArr > 0 ? "and ARRAY[car_fuel_type]@> ".concat(fuelArr) : '', "\n         ").concat(car_power_from ? "and car_power >= ".concat(car_power_from) : "", "\n         ").concat(car_power_up_to ? "and car_power =< ".concat(car_power_up_to) : "", "\n         ").concat(car_cubic_capacity_from ? "and car_cubic_capacity >= ".concat(car_cubic_capacity_from) : "", "\n         ").concat(car_cubic_capacity_to ? "and car_cubic_capacity =< ".concat(car_cubic_capacity_to) : "", "\n         ").concat(transmissionArr > 0 ? "and ARRAY[car_transmission] @> ".concat(transmissionArr) : '', "\n         ").concat(car_fuel_consumption ? "and car_fuel_consumption = ".concat(car_fuel_consumption) : "", "\n         ").concat(car_emissions_sticker ? "and car_emissions_sticker = '".concat(car_emissions_sticker, "'") : "", "\n         ").concat(car_emission_class ? "and car_emission_class = '".concat(car_emission_class, "'") : "", "\n         ").concat(colorArr > 0 ? "and ARRAY[car_exterior_colour] @> ".concat(colorArr) : '', "\n         ").concat(car_trailer_coupling ? "and car_trailer_coupling = '".concat(car_trailer_coupling, "'") : "", "\n         ").concat(parkingArr > 0 ? "and ARRAY[car_parking_sensors] @> ".concat(parkingArr, " ") : '', "\n         ").concat(car_cruise_control ? "and car_cruise_control = '".concat(car_cruise_control, "'") : "", "\n         ").concat(interiorColourgArr > 0 ? "and ".concat(interiorColourgArr, " @> ARRAY[car_interior_colour]") : '', "\n         ").concat(interiorMaterialgArr > 0 ? "and ".concat(interiorMaterialgArr, " @> ARRAY[car_interior_material]") : '', "\n         ").concat(car_airbags ? "and car_airbags = '".concat(car_airbags, "'") : "", "\n         ").concat(car_air_conditioning ? "and car_air_conditioning = '".concat(car_air_conditioning, "'") : "", "\n         ").concat(car_vendor ? "and car_vendor = '".concat(car_vendor, "'") : "", "\n         ").concat(car_dealer_rating ? "and car_dealer_rating >= ".concat(car_dealer_rating) : "", "\n         ").concat(car_discount_offers == true ? "and car_discount_offers = ".concat(car_discount_offers) : "", "\n         ").concat(car_non_smoker == true ? "and car_non_smoker = ".concat(car_non_smoker) : "", "\n         ").concat(car_taxi == true ? "and car_taxi = ".concat(car_taxi) : "", "\n         ").concat(car_vat == true ? "and car_vat = ".concat(car_vat) : "", "\n         ").concat(car_warranty == true ? "and car_warranty = ".concat(car_warranty) : "", "\n         ").concat(car_environmental_bonus == true ? "and car_environmental_bonus = ".concat(car_environmental_bonus) : "", "\n         ").concat(car_damaged ? "and car_damaged = '".concat(car_damaged, "'") : "", "\n         ").concat(car_commercial ? "and car_commercial = '".concat(car_commercial, "'") : "", "\n         ").concat(car_programme ? "and car_programme = '".concat(car_programme, "'") : "", "\n         ").concat(extrasId.length ? "and extras @> ".concat(extrasId) : "", "\n         ").concat(othersId.length ? "and others @> ".concat(othersId) : "", "\n         ").concat(picture == true ? "and Array_Length(car_images_url, 1) > 0" : "", "\n         ").concat(video == true ? "and car_vide_link != '' " : "", "\n         ").concat(days ? "and car_ad_create_at > current_date - interval '".concat(days, " days'") : "", "\n      ORDER BY\n         car_id desc\n      LIMIT ").concat(limit, "\n      OFFSET ").concat(offset, ";\n   ");
  return fetchALL(FOUND_CARS_LIST);
};

var foundCarsCount = function foundCarsCount(car_make, car_model, car_description, car_variant, bodyArr, car_number_seats, car_number_door, car_silding_door, car_condition, typeArr, car_payment_type, car_price_from, car_price_up_to, car_firt_date_year_from, car_firt_date_year_up_to, car_mileage_from, car_mileage_up_to, car_hu_valid_until, car_previous_owners, car_full_service_history, car_roadworthy, car_country, car_city, zipcode, car_radius, fuelArr, car_power_from, car_power_up_to, car_cubic_capacity_from, car_cubic_capacity_to, transmissionArr, car_fuel_consumption, car_emissions_sticker, car_emission_class, colorArr, car_trailer_coupling, parkingArr, car_cruise_control, interiorColourgArr, interiorMaterialgArr, car_airbags, car_air_conditioning, extrasId, othersId, car_vendor, car_dealer_rating, car_discount_offers, car_non_smoker, car_taxi, car_vat, car_warranty, car_environmental_bonus, car_damaged, car_commercial, car_programme, video, picture, days) {
  var FOUND_CARS_COUNT = "\n   SELECT \n      count(car_id)\n   FROM\n      cars\n   WHERE\n      car_active = true\n      ".concat(car_make ? "and car_make = '".concat(car_make, "'") : "", "\n      ").concat(car_model ? "and car_model = '".concat(car_model, "'") : "", "\n      ").concat(car_description ? "and car_description ilike '%".concat(car_description, "%'") : "", "\n      ").concat(car_variant ? "and car_variant = '".concat(car_variant, "'") : "", "\n      ").concat(bodyArr > 0 ? "and ".concat(bodyArr, " @> ARRAY[car_body]") : '', "\n      ").concat(car_number_seats ? "and car_number_seats = ".concat(car_number_seats) : "", "\n      ").concat(car_number_door ? "and car_number_door = ".concat(car_number_door) : "", "\n      ").concat(car_silding_door ? "and car_silding_door = '".concat(car_silding_door, "'") : "", "\n      ").concat(car_condition ? "and car_condition = '".concat(car_condition, "'") : "", "\n      ").concat(typeArr > 0 ? "and ".concat(typeArr, " @> ARRAY[car_type]") : '', "\n      ").concat(car_payment_type ? "and car_payment_type = '".concat(car_payment_type, "'") : "", "\n      ").concat(car_price_from ? "and car_price >= ".concat(car_price_from) : "", "\n      ").concat(car_price_up_to ? "and car_price =< ".concat(car_price_up_to) : "", "\n      ").concat(car_firt_date_year_from ? "and car_firt_date_year >= ".concat(car_firt_date_year_from) : "", "\n      ").concat(car_firt_date_year_up_to ? "and car_firt_date_year =< ".concat(car_firt_date_year_up_to) : "", "\n      ").concat(car_mileage_from ? "and car_mileage >= ".concat(car_mileage_from) : "", "\n      ").concat(car_mileage_up_to ? "and car_mileage =< ".concat(car_mileage_up_to) : "", "\n      ").concat(car_hu_valid_until ? "and car_hu_valid_until = '".concat(car_hu_valid_until, "'") : "", "\n      ").concat(car_previous_owners ? "and car_previous_owners = ".concat(car_previous_owners) : "", "\n      ").concat(car_full_service_history ? "and car_full_service_history = '".concat(car_full_service_history, "'") : "", "\n      ").concat(car_roadworthy ? "and car_roadworthy = '".concat(car_roadworthy, "'") : "", "\n      ").concat(car_country ? "and car_country = '".concat(car_country, "'") : "", "\n      ").concat(car_city > 0 ? "and ".concat(car_city, " @> ARRAY[car_city_zipcode]") : "", "\n      ").concat(zipcode ? "and car_city_zipcode ilike '%".concat(zipcode, "%'") : "", "\n      ").concat(car_radius ? "and car_radius = ".concat(car_radius) : "", "\n      ").concat(fuelArr > 0 ? "and ".concat(fuelArr, " @> ARRAY[car_fuel_type]") : '', "\n      ").concat(car_power_from ? "and car_power >= ".concat(car_power_from) : "", "\n      ").concat(car_power_up_to ? "and car_power =< ".concat(car_power_up_to) : "", "\n      ").concat(car_cubic_capacity_from ? "and car_cubic_capacity >= ".concat(car_cubic_capacity_from) : "", "\n      ").concat(car_cubic_capacity_to ? "and car_cubic_capacity =< ".concat(car_cubic_capacity_to) : "", "\n      ").concat(transmissionArr > 0 ? "and ".concat(transmissionArr, " @> ARRAY[car_transmission]") : '', "\n      ").concat(car_fuel_consumption ? "and car_fuel_consumption = ".concat(car_fuel_consumption) : "", "\n      ").concat(car_emissions_sticker ? "and car_emissions_sticker = '".concat(car_emissions_sticker, "'") : "", "\n      ").concat(car_emission_class ? "and car_emission_class = '".concat(car_emission_class, "'") : "", "\n      ").concat(colorArr > 0 ? "and ".concat(colorArr, " @> ARRAY[car_exterior_colour]") : '', "\n      ").concat(car_trailer_coupling ? "and car_trailer_coupling = '".concat(car_trailer_coupling, "'") : "", "\n      ").concat(parkingArr > 0 ? "and ".concat(parkingArr, " @> ARRAY[car_parking_sensors]") : '', "\n      ").concat(car_cruise_control ? "and car_cruise_control = '".concat(car_cruise_control, "'") : "", "\n      ").concat(interiorColourgArr > 0 ? "and ".concat(interiorColourgArr, " @> ARRAY[car_interior_colour]") : '', "\n      ").concat(interiorMaterialgArr > 0 ? "and ".concat(interiorMaterialgArr, " @> ARRAY[car_interior_material]") : '', "\n      ").concat(car_airbags ? "and car_airbags = '".concat(car_airbags, "'") : "", "\n      ").concat(car_air_conditioning ? "and car_air_conditioning = '".concat(car_air_conditioning, "'") : "", "\n      ").concat(car_vendor ? "and car_vendor = '".concat(car_vendor, "'") : "", "\n      ").concat(car_dealer_rating ? "and car_dealer_rating >= ".concat(car_dealer_rating) : "", "\n      ").concat(car_discount_offers == true ? "and car_discount_offers = ".concat(car_discount_offers) : "", "\n      ").concat(car_non_smoker == true ? "and car_non_smoker = ".concat(car_non_smoker) : "", "\n      ").concat(car_taxi == true ? "and car_taxi = ".concat(car_taxi) : "", "\n      ").concat(car_vat == true ? "and car_vat = ".concat(car_vat) : "", "\n      ").concat(car_warranty == true ? "and car_warranty = ".concat(car_warranty) : "", "\n      ").concat(car_environmental_bonus == true ? "and car_environmental_bonus = ".concat(car_environmental_bonus) : "", "\n      ").concat(car_damaged ? "and car_damaged = '".concat(car_damaged, "'") : "", "\n      ").concat(car_commercial ? "and car_commercial = '".concat(car_commercial, "'") : "", "\n      ").concat(car_programme ? "and car_programme = '".concat(car_programme, "'") : "", "\n      ").concat(extrasId ? "and extras @> ".concat(extrasId) : "", "\n      ").concat(othersId ? "and extras @> ".concat(othersId) : "", "\n      ").concat(picture == true ? "and Array_Length(car_images_url, 1) > 0" : "", "\n      ").concat(video == true ? "and car_vide_link != '' " : "", "\n      ").concat(days ? "and car_ad_create_at > current_date - interval '".concat(days, " days'") : "", ";\n");
  return fetch(FOUND_CARS_COUNT);
};

var foundCarById = function foundCarById(id) {
  return fetch(FOUND_CAR_BY_ID, id);
};

var foundCar = function foundCar(car_id) {
  return fetch(FOUND_CAR, car_id);
};

var addCar = function addCar(user_id, car_make, car_model, car_variant, car_body, car_number_seats, car_number_door, car_silding_door, car_condition, car_type, car_payment_type, car_price, car_firt_date, car_firt_date_year, car_mileage, car_hu_valid_until, car_previous_owners, car_full_service_history, car_roadworthy, car_country, car_city_zipcode, car_radius, car_img, car_img_name, user_email, user_phone, car_vide_link) {
  return fetch(ADD_CAR, user_id, car_make, car_model, car_variant, car_body, car_number_seats, car_number_door, car_silding_door, car_condition, car_type, car_payment_type, car_price, car_firt_date, car_firt_date_year, car_mileage, car_hu_valid_until, car_previous_owners, car_full_service_history, car_roadworthy, car_country, car_city_zipcode, car_radius, car_img, car_img_name, user_email, user_phone, car_vide_link);
};

var addEngineData = function addEngineData(car_id, car_fuel_type, car_power, car_cubic_capacity, car_transmission, car_fuel_consumption, car_emissions_sticker, car_emission_class, car_exterior_colour, car_trailer_coupling, car_parking_sensors, car_cruise_control, othersId) {
  return fetch(ADD_ENGINE_DATA, car_id, car_fuel_type, car_power, car_cubic_capacity, car_transmission, car_fuel_consumption, car_emissions_sticker, car_emission_class, car_exterior_colour, car_trailer_coupling, car_parking_sensors, car_cruise_control, othersId);
};

var addInteriorData = function addInteriorData(car_id, car_interior_colour, car_interior_material, car_airbags, car_air_conditioning, extrasId, car_vendor, car_dealer_rating, car_discount_offers, car_non_smoker, car_taxi, car_vat, car_warranty, car_environmental_bonus, car_damaged, car_commercial, car_programme, car_description) {
  return fetch(ADD_INTERIOR_DATA, car_id, car_interior_colour, car_interior_material, car_airbags, car_air_conditioning, extrasId, car_vendor, car_dealer_rating, car_discount_offers, car_non_smoker, car_taxi, car_vat, car_warranty, car_environmental_bonus, car_damaged, car_commercial, car_programme, car_description);
};

var updateCar = function updateCar(car_id, user_id, car_make, car_model, car_variant, car_body, car_number_seats, car_number_door, car_silding_door, car_condition, car_type, car_payment_type, car_price, car_firt_date, car_firt_date_year, car_mileage, car_hu_valid_until, car_previous_owners, car_full_service_history, car_roadworthy, car_country, car_city_zipcode, car_radius, car_img, car_img_name, user_email, user_phone, car_vide_link) {
  return fetch(UPDATE_CAR, car_id, user_id, car_make, car_model, car_variant, car_body, car_number_seats, car_number_door, car_silding_door, car_condition, car_type, car_payment_type, car_price, car_firt_date, car_firt_date_year, car_mileage, car_hu_valid_until, car_previous_owners, car_full_service_history, car_roadworthy, car_country, car_city_zipcode, car_radius, car_img, car_img_name, user_email, user_phone, car_vide_link);
};

var deleteCar = function deleteCar(car_id) {
  return fetch(DELETE_CAR, car_id);
};

module.exports = {
  carsList: carsList,
  foundCarsList: foundCarsList,
  foundCarsCount: foundCarsCount,
  addCar: addCar,
  updateCar: updateCar,
  foundCar: foundCar,
  foundCarById: foundCarById,
  deleteCar: deleteCar,
  addEngineData: addEngineData,
  addInteriorData: addInteriorData
};